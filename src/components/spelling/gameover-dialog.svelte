<script>
	import {createEventDispatcher, onMount} from 'svelte'
	import gsap from 'gsap'
	import {sound} from "./Sound";
	const dispatch = createEventDispatcher()

	let game_over_svg
	let restart_button

	onMount(() => {
		gsap.set([game_over_svg, restart_button], {
			autoAlpha: 0
		})
		sound.play('player-losing')
		gsap.timeline().fromTo(game_over_svg, {
			y: "-=300"
		}, {
			y: "+=300",
			autoAlpha: 1,
			duration: 0.8
		}).fromTo(restart_button, {
			y: "-=100"
		}, {
			autoAlpha: 1,
			y: "+=100",
			onStart: () => {
				sound.play('changing-tab')
			}
		})
	})

	const restartEasy = () => {
		dispatch('restart-easy')
		sound.play('casino-notification')
	}
</script>

<div class="transform -translate-x-1/2 -translate-y-1/2 fixed z-20 left-1/2 top-1/2">
	<svg class="h-16" bind:this={game_over_svg} viewBox="0 0 367 54" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M38.4961 27.8164L42.1567 27.7925C43.05 27.7925 43.5684 27.7845 43.7119 27.7686V45.5215C38.1133 46.4626 33.6471 46.9331 30.3135 46.9331C26.9798 46.9331 23.8535 46.4626 20.9346 45.5215C18.0156 44.5645 15.4875 43.2087 13.3501 41.4541C11.2127 39.6995 9.53792 37.5781 8.32568 35.0898C7.11344 32.5856 6.50732 29.7863 6.50732 26.6919C6.50732 20.6147 8.92383 15.7658 13.7568 12.145C18.6058 8.52425 24.8185 6.71387 32.395 6.71387C36.1115 6.71387 39.0544 7.11263 41.2236 7.91016C41.6064 8.05371 41.8138 8.12549 41.8457 8.12549V19.6816C39.501 18.9639 37.3477 18.605 35.3857 18.605C31.8128 18.605 29.0135 19.554 26.9878 21.4521C24.9621 23.3503 23.9572 25.5355 23.9731 28.0078C23.9731 29.7305 24.4437 31.1421 25.3848 32.2427C26.3418 33.3433 27.6497 33.8936 29.3086 33.8936C30.2018 33.8936 30.8877 33.7819 31.3662 33.5586C31.3981 32.9684 31.4141 32.2108 31.4141 31.2856V27.8164C33.7747 27.8164 36.1354 27.8164 38.4961 27.8164Z" fill="white"/>
		<path d="M47.0376 46L66.0347 9.72852C66.6886 8.43652 67.8929 7.5752 69.6475 7.14453C70.1579 7.01693 70.7879 6.95312 71.5376 6.95312C72.2873 6.95312 73.1007 7.16846 73.978 7.59912C74.8713 8.01383 75.5731 8.67578 76.0835 9.58496L96.4683 46H77.0645L75.5571 42.2197H65.2212L63.9292 46H47.0376ZM66.3936 34.6353H74.1216L70.4609 24.2993L66.3936 34.6353Z" fill="white"/>
		<path d="M100.105 7.79053H105.584L124.055 25.1367L143.028 7.79053H148.315V46H132.596V33.6064L122.834 44.3252L113.336 33.8936V46H100.105V7.79053Z" fill="white"/>
		<path d="M154.225 7.79053H181.764V18.7964H169.107V21.9307H181.716V31.3096H169.107V34.9224H182.601V46H154.225V7.79053Z" fill="white"/>
		<path d="M214.949 22.3135C214.949 19.6178 213.657 18.27 211.073 18.27C209.956 18.27 208.712 18.9718 207.34 20.3755C205.283 22.4969 203.847 25.0251 203.034 27.96C202.778 28.8851 202.651 29.7384 202.651 30.52C202.651 33.1678 203.991 34.4917 206.67 34.4917C207.739 34.5076 208.959 33.7979 210.331 32.3623C212.325 30.2568 213.736 27.7048 214.566 24.7061C214.821 23.7809 214.949 22.9834 214.949 22.3135ZM208.417 46.9331C202.755 46.9331 197.842 45.0988 193.679 41.4302C192.355 40.2658 191.206 38.9339 190.233 37.4346C188.16 34.2604 187.123 30.7114 187.123 26.7876C187.123 22.8478 188.08 19.3626 189.994 16.332C191.908 13.3014 194.476 10.9408 197.698 9.25C200.92 7.55924 204.254 6.71387 207.699 6.71387C211.16 6.71387 214.207 7.17643 216.839 8.10156C219.471 9.02669 221.76 10.3586 223.706 12.0972C225.667 13.8198 227.207 15.9333 228.323 18.4375C229.44 20.9417 229.998 23.7729 229.998 26.9312C229.998 30.855 229.001 34.3481 227.007 37.4106C225.014 40.4572 222.358 42.8099 219.04 44.4688C215.722 46.1117 212.181 46.9331 208.417 46.9331Z" fill="white"/>
		<path d="M249.761 7.79053L255.718 19.7773L261.269 7.79053H275.29L256.508 45.9521C256.093 46.7337 255.367 47.1245 254.331 47.1245C253.31 47.1245 252.6 46.7337 252.201 45.9521L232.415 7.79053H249.761Z" fill="white"/>
		<path d="M278.878 7.79053H306.417V18.7964H293.76V21.9307H306.369V31.3096H293.76V34.9224H307.254V46H278.878V7.79053Z" fill="white"/>
		<path d="M337.162 19.873C337.162 17.624 336.324 16.4995 334.649 16.4995C333.932 16.4995 332.935 16.7627 331.659 17.2891L328.477 18.605V27.96C334.267 25.8066 337.162 23.111 337.162 19.873ZM351.374 20.2798C351.374 25.384 348.853 29.4354 343.813 32.4341L354.197 46H335.295L328.572 34.9224V46H312.949V7.79053C323.061 7.07275 329.689 6.71387 332.831 6.71387C335.973 6.71387 338.366 6.90527 340.009 7.28809C344.539 8.32487 347.777 10.542 349.723 13.9395C350.807 15.8854 351.358 17.9989 351.374 20.2798Z" fill="white"/>
		<path fill-rule="evenodd" clip-rule="evenodd" d="M38.4961 27.8164L42.1567 27.7925C43.05 27.7925 43.5684 27.7845 43.7119 27.7686V45.5215C42.4977 45.7256 41.3368 45.9075 40.2292 46.0674C36.2294 46.6445 32.9242 46.9331 30.3135 46.9331C26.9798 46.9331 23.8535 46.4626 20.9346 45.5215C18.0156 44.5645 15.4875 43.2087 13.3501 41.4541C11.2127 39.6995 9.53792 37.5781 8.32568 35.0898C7.11344 32.5856 6.50732 29.7863 6.50732 26.6919C6.50732 20.6147 8.92383 15.7658 13.7568 12.145C18.6058 8.52425 24.8185 6.71387 32.395 6.71387C36.1115 6.71387 39.0544 7.11263 41.2236 7.91016C41.6064 8.05371 41.8138 8.12549 41.8457 8.12549V19.6816C39.6828 19.0195 37.6828 18.6628 35.8457 18.6115C35.6912 18.6071 35.5379 18.605 35.3857 18.605C31.8128 18.605 29.0135 19.554 26.9878 21.4521C26.8594 21.5724 26.7352 21.6938 26.615 21.8164C26.1545 22.2862 25.7542 22.7729 25.4141 23.2766C24.4424 24.7155 23.9621 26.2925 23.9731 28.0078C23.9731 29.7305 24.4437 31.1421 25.3848 32.2427C25.3919 32.2509 25.3992 32.2592 25.4064 32.2674C25.788 32.7005 26.2248 33.0472 26.7168 33.3073C27.4561 33.6981 28.32 33.8936 29.3086 33.8936C30.2018 33.8936 30.8877 33.7819 31.3662 33.5586C31.3981 32.9684 31.4141 32.2108 31.4141 31.2856V27.8164H38.4961ZM47.8457 21.2723L49.7119 21.065V27.9618L60.7042 6.97411C62.3405 3.77813 65.2253 2.05455 68.2054 1.32039C69.3413 1.03797 70.4905 0.953125 71.5376 0.953125C73.4151 0.953125 75.1196 1.48312 76.5677 2.18655C78.6417 3.16579 80.2378 4.72827 81.3154 6.64775L81.319 6.65418L94.105 29.4949V1.79053H107.96L124.109 16.9571L140.698 1.79053H187.764V9.40425C189.789 7.19724 192.18 5.36964 194.91 3.93707C198.943 1.82113 203.228 0.713867 207.699 0.713867C211.681 0.713867 215.425 1.24455 218.829 2.44109C220.74 3.11314 222.541 3.96769 224.214 5.01019L222.545 1.79053H253.479L255.527 5.91154L257.435 1.79053H312.417V1.81317L312.524 1.80558C322.59 1.09114 329.437 0.713867 332.831 0.713867C336.105 0.713867 339.04 0.903369 341.358 1.44171C347.184 2.77749 351.997 5.83799 354.929 10.9574L354.947 10.9877L354.964 11.0183C356.551 13.8666 357.351 16.9737 357.373 20.2378L357.374 20.2588V20.2798C357.374 25.5188 355.478 29.9352 352.144 33.4472L366.345 52H272.878V26.2772L261.851 48.6837L261.808 48.7644C260.153 51.8838 257.127 53.1245 254.331 53.1245C253.066 53.1245 251.582 52.8819 250.139 52.0875C248.653 51.2696 247.567 50.0602 246.869 48.7026C246.865 48.6948 246.861 48.6869 246.857 48.679L235.987 27.7162C235.859 32.4148 234.57 36.7912 232.036 40.6843L232.028 40.6963C229.441 44.6483 225.972 47.7111 221.723 49.8353L221.713 49.8405L221.703 49.8456C217.543 51.9055 213.089 52.9331 208.417 52.9331C201.329 52.9331 194.999 50.5888 189.716 45.9355C189.715 45.9343 189.713 45.933 189.712 45.9317C189.33 45.596 188.96 45.2498 188.601 44.8933V52H126.596V49.1056L122.834 53.2366L119.336 49.3948V52H72.9975L71.4902 48.2197H69.5113L68.2193 52H41.1272C36.9351 52.6063 33.3095 52.9331 30.3135 52.9331C26.409 52.9331 22.6567 52.3808 19.0935 51.232L19.0794 51.2275L19.0653 51.2229C15.5182 50.0599 12.3152 48.3673 9.54314 46.0917C6.73767 43.7887 4.52182 40.9815 2.93174 37.7177L2.92845 37.7109L2.92516 37.7041C1.27599 34.2973 0.507324 30.5892 0.507324 26.6919C0.507324 18.7393 3.80274 12.1053 10.1594 7.34312L10.167 7.33743C16.2895 2.76567 23.8552 0.713867 32.395 0.713867C36.2558 0.713867 39.8378 1.09688 42.861 2.12549H47.8457V21.2723ZM43.6289 2.40174C43.6286 2.40162 43.6282 2.4015 43.6279 2.40138C43.6357 2.404 43.6365 2.40435 43.6289 2.40174ZM63.9292 46L65.2212 42.2197H75.5571L77.0645 46H96.4683L76.0835 9.58496C75.5731 8.67578 74.8713 8.01383 73.978 7.59912C73.1007 7.16846 72.2873 6.95312 71.5376 6.95312C70.7879 6.95312 70.1579 7.01693 69.6475 7.14453C67.8929 7.5752 66.6886 8.43652 66.0347 9.72852L47.0376 46H63.9292ZM74.1216 34.6353L70.4609 24.2993L66.3936 34.6353H74.1216ZM113.336 46V33.8936L122.834 44.3252L132.596 33.6064V46H148.315V7.79053H143.028L124.055 25.1367L105.584 7.79053H100.105V46H113.336ZM190.233 37.4346C191.206 38.9339 192.355 40.2658 193.679 41.4302C197.842 45.0988 202.755 46.9331 208.417 46.9331C212.181 46.9331 215.722 46.1117 219.04 44.4688C222.358 42.8099 225.014 40.4572 227.007 37.4106C229.001 34.3481 229.998 30.855 229.998 26.9312C229.998 23.7729 229.44 20.9417 228.323 18.4375C227.207 15.9333 225.667 13.8198 223.706 12.0972C221.76 10.3586 219.471 9.02669 216.839 8.10156C214.207 7.17643 211.16 6.71387 207.699 6.71387C204.254 6.71387 200.92 7.55924 197.698 9.25C194.476 10.9408 191.908 13.3014 189.994 16.332C188.984 17.9311 188.241 19.6567 187.764 21.5088C187.747 21.572 187.731 21.6353 187.716 21.6987C187.697 21.7758 187.678 21.8531 187.66 21.9307C187.444 22.855 187.294 23.8103 187.208 24.7964C187.151 25.4467 187.123 26.1104 187.123 26.7876C187.123 27.512 187.158 28.2235 187.229 28.9224C187.311 29.7354 187.441 30.5311 187.619 31.3096C187.65 31.4443 187.682 31.5785 187.716 31.7122C187.945 32.6214 188.24 33.5066 188.601 34.3678C189.045 35.4263 189.589 36.4485 190.233 37.4346ZM182.601 34.9224H169.107V31.3096H181.716V21.9307H169.107V18.7964H181.764V7.79053H154.225V46H182.601V34.9224ZM252.201 45.9521C252.6 46.7337 253.31 47.1245 254.331 47.1245C255.367 47.1245 256.093 46.7337 256.508 45.9521L275.29 7.79053H261.269L255.718 19.7773L249.761 7.79053H232.415L252.201 45.9521ZM278.878 46H307.254V34.9224H293.76V31.3096H306.369V21.9307H293.76V18.7964H306.417V7.79053H278.878V46ZM312.949 46H328.572V34.9224L335.295 46H354.197L343.813 32.4341C345.266 31.5698 346.509 30.6181 347.543 29.579C350.097 27.0126 351.374 23.9129 351.374 20.2798C351.358 17.9989 350.807 15.8854 349.723 13.9395C347.777 10.542 344.539 8.32487 340.009 7.28809C338.366 6.90527 335.973 6.71387 332.831 6.71387C329.689 6.71387 323.061 7.07275 312.949 7.79053V46ZM334.477 24.7712C336.267 23.3061 337.162 21.6734 337.162 19.873C337.162 17.624 336.324 16.4995 334.649 16.4995C333.932 16.4995 332.935 16.7627 331.659 17.2891L328.477 18.605V27.96C329.305 27.6519 330.074 27.3327 330.784 27.0024C332.277 26.3077 333.508 25.564 334.477 24.7712ZM203.034 27.96C203.847 25.0251 205.283 22.4969 207.34 20.3755C208.712 18.9718 209.956 18.27 211.073 18.27C213.657 18.27 214.949 19.6178 214.949 22.3135C214.949 22.9834 214.821 23.7809 214.566 24.7061C213.736 27.7048 212.325 30.2568 210.331 32.3623C208.959 33.7979 207.739 34.5076 206.67 34.4917C203.991 34.4917 202.651 33.1678 202.651 30.52C202.651 29.7384 202.778 28.8851 203.034 27.96Z" fill="#ED7182"/>
	</svg>

	<div class="flex justify-center">
		<button bind:this={restart_button} on:click={restartEasy} class="mt-8 bg-white text-red-500 border-red-500 border-2 px-8 py-4 rounded-full font-bold text-2xl">再玩</button>
	</div>
</div>